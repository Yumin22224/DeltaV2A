# Delta Correspondence Experiment Configuration
# Phase 0-2: Experimental validation and discovery

# Data configuration
data:
  root_dir: "data/experiment"
  image_subdir: "images"   # Landscape images organized by category
  audio_subdir: "audio"    # Electronic music clips
  max_images: 1000
  max_audio: 1000

# Model configuration
model:
  # Primary embedders
  clip:
    name: "ViT-L-14"
    pretrained: "openai"
    embed_dim: 768

  clap:
    model_id: 1  # 630k+audioset non-fusion (music)
    enable_fusion: false
    embed_dim: 512
    sample_rate: 48000
    max_duration: 20.0  # seconds (truncate/pad for batch processing)

  # Cross-modal alignment
  alignment:
    method: "cca"
    n_components: 512
    fit_on_originals: true

  # Legacy (weights preserved, not used)
  imagebind:
    enabled: false
    embed_dim: 1024

# Phase 0 thresholds
thresholds:
  sensitivity:
    min_distance: 0.01  # Minimum delta norm to be considered sensitive

  linearity:
    min_cosine: 0.8  # Minimum mean pairwise cosine for consistency
    max_cv: 0.3  # Maximum CV of norms
    max_variance: 0.05  # Maximum cross-category variance

# Effects configuration
effects:
  intensities: ["low", "mid", "high"]

  image:
    types: ["brightness", "contrast", "saturation", "blur"]

  audio:
    types: ["lpf", "highshelf", "saturation", "reverb"]

# Effect mapping (hypothesis for retrieval evaluation)
effect_mapping:
  blur: "lpf"
  brightness: "highshelf"
  contrast: "saturation"
  saturation: "reverb"

# Statistical analysis
n_permutations: 10000

# Output
output:
  dir: "outputs/experiment"
  save_plots: true
  plot_format: "png"

# Device
device: "mps"  # or "cuda" or "cpu"
